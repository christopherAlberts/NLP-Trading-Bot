learning bitcoin with charts how are hash rate difficulty and fees relateddate may  bitcoin’s difficulty adjustment mechanism is one of its most important aspects but learning how it works can be a daunting task this article leverages onchain data to visualize how this mechanism works and how it relates to hash rate block intervals transaction fees and the mempool after reading this article you will have a better understanding of why at certain times using bitcoin may appear to be relatively slow and expensive but also how bitcoin fixes this and why this process is so essential to ensure bitcoin’s monetary propertiesbitcoin’s supply issuance scheduleif you have heard of bitcoin you have probably heard that its supply is hard capped at  million units btc making it a perfectly scarce asset and thus the ultimate “hard money”when bitcoin was created miners received  btc for each new block as a reward for their work the software has a builtin rule that after every  blocks that are mined approximately every  years if the block interval is  minutes this “block subsidy” is cut in half during an event called “the halving” during this first “reward era”’ which ended november    million btc were mined — half of its maximum supply during the second reward era half of that amount  million     million was issued followed by half of that  million     million during the third reward era — and so forth after  halvings the block subsidy equals the smallest unit in bitcoin  btc   sat and cannot be split after which means the block subsidy falls away completely after that believed to be in the year  if block intervals were  minutes during its entire existence the first  reward eras of bitcoin’s issuance schedule are visualized in figure onefigure one the first  reward eras of bitcoins supply issuance schedule image sourcethe careful reader will have noticed that in the previous paragraph we mentioned twice that the actual calendar dates on which these halving events occur depend on the block intervals and that we assumed  minutes here why is it important that this supply issuance schedule is predictable in regular calendartimes in the first placethe importance of relatively stable block intervalslet’s consider what it would look like if bitcoin didn’t have a builtin difficulty adjustment mechanism but simply had a fixed mining difficultyif that fixed difficulty had been set relatively high early mining would have been very expensive and blocks would have come in at a very slow pace early on clearly that wouldn’t have been ideal to bootstrap a new network and could have meant that it never succeeded in the first placeon the other extreme if the difficulty would have been set relatively low to incentivize early network participants to join block intervals would have gotten smaller as more miners joined the network and blocks would have come in at an increasingly quicker pace it would have quickly run through its entire supply issuance schedule had this happened the bitcoin network likely wouldn’t have had enough time to develop the block space market needed to sufficiently incentivize miners to keep mining blocks in order to process transactions and secure the network after the block subsidy had run outto summarize relatively stable block intervals are needed to spread out bitcoin’s supply issuance over time which in turn is needed to incentivize miners to keep joining the network over a relatively long bootstrapping period as well as to gradually develop a block space market that will be able to keep the lights on after the block subsidy reward runs outto guarantee that block intervals will remain relatively stable over a multi decade period bitcoin has a difficulty adjustment mechanism as can be seen in figure  even with this builtin difficulty mechanism its block intervals were not very stable averaging much longer than  minutes per block during its first year of existence the block intervals became more stable after bitcoin set its first market price in july  and have been relatively stable at just under  minutes for over five years now no structural up or down trends in the orange line in figure  – works like a charmfigure  the  moving average of bitcoins mean block interval over time image sourcebitcoin’s difficulty adjustment mechanismto mine bitcoin miners use highly specialized computers to basically guess a certain number slightly simplified explanation when a miner finds the number that the network is currently looking for that miner earns the right to create a new block on the bitcoin blockchain take its block subsidy choose which transactions to include in that block and collect the fees of those transactions at the time of writing all miners that are active on the bitcoin network are estimated to have a total capacity hash rate of  exahashes per second ehs which is  hashes per secondin bitcoin’s first year of existence  it was still possible to mine bitcoin on the central processing unit cpu which is basically the central chip in a computer that takes care of lots of things of an average consumer computer as the network’s hash rate was just a few million hashes per second over time more computers joined the network and eventually chips that were better at heavy number crunching via their graphics processing unit gpu the chip in a computer that is applied for graphical tasks and linear algebra or even hardware custom made for bitcoin mining an asic or application specific integrated circuit was usedas you can imagine as the network’s hash rate increased by a multitrillionfold from that first year until now it was necessary to make it a lot harder to guess that certain number to ensure relatively stable block intervals of approximately  minutes eachin bitcoin “difficulty” is the measure for how hard it is to find that number that the network is looking for every  blocks  days if block intervals are  minutes the bitcoin software basically calculates the block intervals during that period and adjusts the difficulty so that at current capacity the average block interval will be roughly  minutes againthe interplay between bitcoin’s difficulty the  moving average of the hash rate and block intervals over the last three months is visualized in figure  during the first visualized difficulty adjustment period the red column on the left the hash rate was declining downtrend in black line as network capacity decreased block intervals increased uptrend in blue line making it necessary to decrease the difficulty small drop in orange line after this periodin three difficulty adjustment periods after first green column in figure  the hashrate was increasing again blocks came in faster than planned and difficulty adjusted upwards three times midapril  right red column there was a large power outage in china that caused a massive drop in bitcoin’s hash rate slowing down blocks a lot and making a huge downwards difficulty adjustment necessary after the period after this happened right green column the power outage itself was solved and the downwards difficulty adjustment made it much easier for miners to create blocks again as a result some miners with less efficient hardware andor more expensive energy could earn a profit mining again actually overcompensating the previous loss of hash rate actually sending it to new alltime highsfigure  bitcoins difficulty adjustments orange and a  moving average of the hash rate black and block interval blue image sourcethis latest hash rate drop and recovery is a good example of why miners leaving the network does not have a cascading effect of more miners leaving the network sometimes called the “mining death spiral” by critics but the software simply increases the remaining miners’ profit margins incentivizing other miners to rejoin the networktransaction feesa side effect of this mechanism that we all feel is its impact on transaction fees during times when the hash rate increases and blocks are coming in faster than planned green columns in figure  transactions can relatively easily be included in blocks since this means that there are less transactions queued up in line in bitcoin called the “mempool” to be included in upcoming blocks transaction fees can be relatively lowthe opposite is true during periods where hash rate drops and block intervals increase red column in figure  when blocks are coming in slowly the queue of transactions waiting to get included gets crowded and people need to bid up their transaction fees to basically jump the line as such transaction fees spike especially when the network capacity decreases hash rate drops and is waiting to be bailed out by the next difficulty adjustmentfigure  a  moving average of the bitcoin hash rate black median block interval blue and median transaction fees orange image sourcein this section we discussed the fees of transactions that were included in blocks for those looking to transact on the bitcoin network it is even more relevant to get a feel for how much all of the transactions that are still waiting in line to be included in future blocks are bidding for their needed block spacemempoolas briefly mentioned above the bitcoin mempool can be interpreted as the total of all transactions which were broadcast on the network but are still waiting in line to be included in a future block technically each of the thousands of bitcoin nodes on the network has its own mempool but since they are mostly well interconnected visualizing them as a single waiting line is alright for general explanatory purposesmempoolspace is an industrystandard website that gives anyone not running their own node or simply looking to get a quick look at the mempool all the relevant data examples are the total size of the waiting line mempool size how many transactions are joining the queue incoming transactions if blocks are coming in faster or slower than expected estimated difficulty adjustment and estimations of how high the transaction fee of a new transaction needs to be to be included at low medium or high priorityfigure  visualizes the mempool of the last three months as you would expect the patterns described in figure  can also be seen here between late february and early april  when the amount of hash rate on the bitcoin network increased and more blocks than planned were created the mempool size the size of the waiting line decreased and transaction fees decreased correspondingly after the midapril hash rate drop the mempool quickly increased and transaction fees skyrocketed but both declined quite quickly after the april  difficulty adjustment and subsequent hash rate growth to alltime highsfigure  the bitcoin mempool according to mempoolspace image sourcethe future block space marketas briefly mentioned at an earlier point in this article bitcoin’s block subsidy is designed to decay over time and the development of a healthy block space market where transaction fees become the primary source of revenue for miners is essential to incentivize miners to keep processing transactions and securing the network in the longrunthis is possibly the most important test that awaits bitcoin in the future and is the subject of my previous bitcoin magazine article titled “an ode and forthcoming obituary to bitcoin’s fouryear cycle” which is a recommended followup read finally if you have any questions on the topics discussed in this article feel free to send me a message on twitterdisclaimer this article was written for educational and entertainment purposes only and should not be taken as investment advicethis is a guest post by dilutionproof opinions expressed are entirely their own and do not necessarily reflect those of btc inc or bitcoin magazine